"use strict";
///<reference types="./Libraries/ammo.js"/>
let fps;
let fpsDisplay = document.querySelector("h2#FPS");
const times = [];
let physicsWorld;
let rigidBodies = [], tmpTrans;
Ammo().then(startAmmo);
function startAmmo() {
    setupPhysicsWorld();
    tmpTrans = new Ammo.btTransform();
    createGroundAndSphere();
}
function setupPhysicsWorld() {
    let collisionConfiguration = new Ammo.btDefaultCollisionConfiguration(), dispatcher = new Ammo.btCollisionDispatcher(collisionConfiguration), overlappingPairCache = new Ammo.btDbvtBroadphase(), solver = new Ammo.btSequentialImpulseConstraintSolver();
    physicsWorld = new Ammo.btDiscreteDynamicsWorld(dispatcher, overlappingPairCache, solver, collisionConfiguration);
    physicsWorld.setGravity(new Ammo.btVector3(0, -10, 0));
    //Loop();
    setInterval(Loop, 16.6); //ca. 60fps fixed
}
function Loop() {
    updatePhysics(16.6);
    // console.log("loop");
    //requestAnimationFrame(Loop);
}
function updatePhysics(deltaTime) {
    // Step world
    physicsWorld.stepSimulation(deltaTime, 10);
    // Update rigid bodies
    for (let i = 0; i < rigidBodies.length; i++) {
        let obj = rigidBodies[i];
        let ms = obj.getMotionState();
        ms.getWorldTransform(tmpTrans);
        let p = tmpTrans.getOrigin();
        let q = tmpTrans.getRotation();
        console.log(p.y());
    }
}
function createGroundAndSphere() {
    let pos = { x: 0, y: 0, z: 0 };
    let scale = { x: 50, y: 2, z: 50 };
    let quat = { x: 0, y: 0, z: 0, w: 1 };
    let mass = 0;
    let transform = new Ammo.btTransform();
    transform.setIdentity();
    transform.setOrigin(new Ammo.btVector3(pos.x, pos.y, pos.z));
    transform.setRotation(new Ammo.btQuaternion(quat.x, quat.y, quat.z, quat.w));
    let motionState = new Ammo.btDefaultMotionState(transform);
    let colShape = new Ammo.btBoxShape(new Ammo.btVector3(scale.x * 0.5, scale.y * 0.5, scale.z * 0.5));
    colShape.setMargin(0.05);
    let localInertia = new Ammo.btVector3(0, 0, 0);
    colShape.calculateLocalInertia(mass, localInertia);
    let rbInfo = new Ammo.btRigidBodyConstructionInfo(mass, motionState, colShape, localInertia);
    let body = new Ammo.btRigidBody(rbInfo);
    physicsWorld.addRigidBody(body);
    pos = { x: 0, y: 20, z: 0 };
    let radius = 2;
    quat = { x: 0, y: 0, z: 0, w: 1 };
    mass = 1;
    transform = new Ammo.btTransform();
    transform.setIdentity();
    transform.setOrigin(new Ammo.btVector3(pos.x, pos.y, pos.z));
    transform.setRotation(new Ammo.btQuaternion(quat.x, quat.y, quat.z, quat.w));
    motionState = new Ammo.btDefaultMotionState(transform);
    colShape = new Ammo.btSphereShape(radius);
    colShape.setMargin(0.05);
    localInertia = new Ammo.btVector3(0, 0, 0);
    colShape.calculateLocalInertia(mass, localInertia);
    rbInfo = new Ammo.btRigidBodyConstructionInfo(mass, motionState, colShape, localInertia);
    body = new Ammo.btRigidBody(rbInfo);
    rigidBodies.push(body);
    physicsWorld.addRigidBody(body);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIk1haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLDJDQUEyQztBQUUzQyxJQUFJLEdBQVcsQ0FBQztBQUNoQixJQUFJLFVBQVUsR0FBZ0IsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMvRCxNQUFNLEtBQUssR0FBYSxFQUFFLENBQUM7QUFDM0IsSUFBSSxZQUFZLENBQUM7QUFDakIsSUFBSSxXQUFXLEdBQUcsRUFBRSxFQUFFLFFBQVEsQ0FBQztBQUUvQixJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7QUFFdkIsU0FBUyxTQUFTO0lBQ2hCLGlCQUFpQixFQUFFLENBQUM7SUFDcEIsUUFBUSxHQUFHLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBRWxDLHFCQUFxQixFQUFFLENBQUM7QUFDMUIsQ0FBQztBQUVELFNBQVMsaUJBQWlCO0lBRXhCLElBQUksc0JBQXNCLEdBQUcsSUFBSSxJQUFJLENBQUMsK0JBQStCLEVBQUUsRUFDckUsVUFBVSxHQUFHLElBQUksSUFBSSxDQUFDLHFCQUFxQixDQUFDLHNCQUFzQixDQUFDLEVBQ25FLG9CQUFvQixHQUFHLElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFLEVBQ2xELE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxtQ0FBbUMsRUFBRSxDQUFDO0lBRTFELFlBQVksR0FBRyxJQUFJLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxVQUFVLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxFQUFFLHNCQUFzQixDQUFDLENBQUM7SUFDbEgsWUFBWSxDQUFDLFVBQVUsQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdkQsU0FBUztJQUNULFdBQVcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxp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cUJBQXFCLENBQUMsSUFBSSxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBRW5ELE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxJQUFJLEVBQUUsV0FBVyxFQUFFLFFBQVEsRUFBRSxZQUFZLENBQUMsQ0FBQztJQUN6RixJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRXBDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDdkIsWUFBWSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNsQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8vPHJlZmVyZW5jZSB0eXBlcz1cIi4vTGlicmFyaWVzL2FtbW8uanNcIi8+XHJcblxyXG5sZXQgZnBzOiBudW1iZXI7XHJcbmxldCBmcHNEaXNwbGF5OiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoMiNGUFNcIik7XHJcbmNvbnN0IHRpbWVzOiBudW1iZXJbXSA9IFtdO1xyXG5sZXQgcGh5c2ljc1dvcmxkO1xyXG5sZXQgcmlnaWRCb2RpZXMgPSBbXSwgdG1wVHJhbnM7XHJcblxyXG5BbW1vKCkudGhlbihzdGFydEFtbW8pO1xyXG5cclxuZnVuY3Rpb24gc3RhcnRBbW1vKCk6IHZvaWQge1xyXG4gIHNldHVwUGh5c2ljc1dvcmxkKCk7XHJcbiAgdG1wVHJhbnMgPSBuZXcgQW1tby5idFRyYW5zZm9ybSgpO1xyXG5cclxuICBjcmVhdGVHcm91bmRBbmRTcGhlcmUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0dXBQaHlzaWNzV29ybGQoKTogdm9pZCB7XHJcblxyXG4gIGxldCBjb2xsaXNpb25Db25maWd1cmF0aW9uID0gbmV3IEFtbW8uYnREZWZhdWx0Q29sbGlzaW9uQ29uZmlndXJhdGlvbigpLFxyXG4gICAgZGlzcGF0Y2hlciA9IG5ldyBBbW1vLmJ0Q29sbGlzaW9uRGlzcGF0Y2hlcihjb2xsaXNpb25Db25maWd1cmF0aW9uKSxcclxuICAgIG92ZXJsYXBwaW5nUGFpckNhY2hlID0gbmV3IEFtbW8uYnREYnZ0QnJvYWRwaGFzZSgpLFxyXG4gICAgc29sdmVyID0gbmV3IEFtbW8uYnRTZXF1ZW50aWFsSW1wdWxzZUNvbnN0cmFpbnRTb2x2ZXIoKTtcclxuXHJcbiAgcGh5c2ljc1dvcmxkID0gbmV3IEFtbW8uYnREaXNjcmV0ZUR5bmFtaWNzV29ybGQoZGlzcGF0Y2hlciwgb3ZlcmxhcHBpbmdQYWlyQ2FjaGUsIHNvbHZlciwgY29sbGlzaW9uQ29uZmlndXJhdGlvbik7XHJcbiAgcGh5c2ljc1dvcmxkLnNldEdyYXZpdHkobmV3IEFtbW8uYnRWZWN0b3IzKDAsIC0xMCwgMCkpO1xyXG4gIC8vTG9vcCgpO1xyXG4gIHNldEludGVydmFsKExvb3AsIDE2LjYpOyAvL2NhLiA2MGZwcyBmaXhlZFxyXG59XHJcblxyXG5mdW5jdGlvbiBMb29wKCkge1xyXG4gIHVwZGF0ZVBoeXNpY3MoMTYuNik7XHJcbiAgLy8gY29uc29sZS5sb2coXCJsb29wXCIpO1xyXG4gIC8vcmVxdWVzdEFuaW1hdGlvbkZyYW1lKExvb3ApO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVQaHlzaWNzKGRlbHRhVGltZTogbnVtYmVyKSB7XHJcblxyXG4gIC8vIFN0ZXAgd29ybGRcclxuICBwaHlzaWNzV29ybGQuc3RlcFNpbXVsYXRpb24oZGVsdGFUaW1lLCAxMCk7XHJcblxyXG4gIC8vIFVwZGF0ZSByaWdpZCBib2RpZXNcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHJpZ2lkQm9kaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBsZXQgb2JqID0gcmlnaWRCb2RpZXNbaV07XHJcbiAgICBsZXQgbXMgPSBvYmouZ2V0TW90aW9uU3RhdGUoKTtcclxuICAgIG1zLmdldFdvcmxkVHJhbnNmb3JtKHRtcFRyYW5zKTtcclxuICAgIGxldCBwID0gdG1wVHJhbnMuZ2V0T3JpZ2luKCk7XHJcbiAgICBsZXQgcSA9IHRtcFRyYW5zLmdldFJvdGF0aW9uKCk7XHJcbiAgICBjb25zb2xlLmxvZyhwLnkoKSk7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlR3JvdW5kQW5kU3BoZXJlKCkge1xyXG4gIGxldCBwb3MgPSB7IHg6IDAsIHk6IDAsIHo6IDAgfTtcclxuICBsZXQgc2NhbGUgPSB7IHg6IDUwLCB5OiAyLCB6OiA1MCB9O1xyXG4gIGxldCBxdWF0ID0geyB4OiAwLCB5OiAwLCB6OiAwLCB3OiAxIH07XHJcbiAgbGV0IG1hc3MgPSAwO1xyXG5cclxuICBsZXQgdHJhbnNmb3JtID0gbmV3IEFtbW8uYnRUcmFuc2Zvcm0oKTtcclxuICB0cmFuc2Zvcm0uc2V0SWRlbnRpdHkoKTtcclxuICB0cmFuc2Zvcm0uc2V0T3JpZ2luKG5ldyBBbW1vLmJ0VmVjdG9yMyhwb3MueCwgcG9zLnksIHBvcy56KSk7XHJcbiAgdHJhbnNmb3JtLnNldFJvdGF0aW9uKG5ldyBBbW1vLmJ0UXVhdGVybmlvbihxdWF0LngsIHF1YXQueSwgcXVhdC56LCBxdWF0LncpKTtcclxuICBsZXQgbW90aW9uU3RhdGUgPSBuZXcgQW1tby5idERlZmF1bHRNb3Rpb25TdGF0ZSh0cmFuc2Zvcm0pO1xyXG5cclxuICBsZXQgY29sU2hhcGUgPSBuZXcgQW1tby5idEJveFNoYXBlKG5ldyBBbW1vLmJ0VmVjdG9yMyhzY2FsZS54ICogMC41LCBzY2FsZS55ICogMC41LCBzY2FsZS56ICogMC41KSk7XHJcbiAgY29sU2hhcGUuc2V0TWFyZ2luKDAuMDUpO1xyXG5cclxuICBsZXQgbG9jYWxJbmVydGlhID0gbmV3IEFtbW8uYnRWZWN0b3IzKDAsIDAsIDApO1xyXG4gIGNvbFNoYXBlLmNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCBsb2NhbEluZXJ0aWEpO1xyXG5cclxuICBsZXQgcmJJbmZvID0gbmV3IEFtbW8uYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvKG1hc3MsIG1vdGlvblN0YXRlLCBjb2xTaGFwZSwgbG9jYWxJbmVydGlhKTtcclxuICBsZXQgYm9keSA9IG5ldyBBbW1vLmJ0UmlnaWRCb2R5KHJiSW5mbyk7XHJcblxyXG5cclxuICBwaHlzaWNzV29ybGQuYWRkUmlnaWRCb2R5KGJvZHkpO1xyXG5cclxuICBwb3MgPSB7IHg6IDAsIHk6IDIwLCB6OiAwIH07XHJcbiAgbGV0IHJhZGl1cyA9IDI7XHJcbiAgcXVhdCA9IHsgeDogMCwgeTogMCwgejogMCwgdzogMSB9O1xyXG4gIG1hc3MgPSAxO1xyXG4gIHRyYW5zZm9ybSA9IG5ldyBBbW1vLmJ0VHJhbnNmb3JtKCk7XHJcbiAgdHJhbnNmb3JtLnNldElkZW50aXR5KCk7XHJcbiAgdHJhbnNmb3JtLnNldE9yaWdpbihuZXcgQW1tby5idFZlY3RvcjMocG9zLngsIHBvcy55LCBwb3MueikpO1xyXG4gIHRyYW5zZm9ybS5zZXRSb3RhdGlvbihuZXcgQW1tby5idFF1YXRlcm5pb24ocXVhdC54LCBxdWF0LnksIHF1YXQueiwgcXVhdC53KSk7XHJcbiAgbW90aW9uU3RhdGUgPSBuZXcgQW1tby5idERlZmF1bHRNb3Rpb25TdGF0ZSh0cmFuc2Zvcm0pO1xyXG5cclxuICBjb2xTaGFwZSA9IG5ldyBBbW1vLmJ0U3BoZXJlU2hhcGUocmFkaXVzKTtcclxuICBjb2xTaGFwZS5zZXRNYXJnaW4oMC4wNSk7XHJcblxyXG4gIGxvY2FsSW5lcnRpYSA9IG5ldyBBbW1vLmJ0VmVjdG9yMygwLCAwLCAwKTtcclxuICBjb2xTaGFwZS5jYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgbG9jYWxJbmVydGlhKTtcclxuXHJcbiAgcmJJbmZvID0gbmV3IEFtbW8uYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvKG1hc3MsIG1vdGlvblN0YXRlLCBjb2xTaGFwZSwgbG9jYWxJbmVydGlhKTtcclxuICBib2R5ID0gbmV3IEFtbW8uYnRSaWdpZEJvZHkocmJJbmZvKTtcclxuXHJcbiAgcmlnaWRCb2RpZXMucHVzaChib2R5KTtcclxuICBwaHlzaWNzV29ybGQuYWRkUmlnaWRCb2R5KGJvZHkpO1xyXG59XHJcblxyXG4iXX0=